import{a as A,J}from"./DialogModal.af9a536b.js";import{J as k}from"./Button.c56bed8d.js";import{d as b,_ as v,r as i,o as t,f as n,a,e as P,b as s,w as e,g as r,t as f,z,n as _,c as w,i as m,F as T,h as S}from"./app.f1ef34bf.js";import{J as M}from"./Input.4240a7e1.js";import{J as B}from"./InputError.baa9cf10.js";import{J as y}from"./SecondaryButton.665ae083.js";import{J as R}from"./DangerButton.9399c8b2.js";const V=b({emits:["confirmed"],props:{title:{default:"Confirm Password"},content:{default:"For your security, please confirm your password to continue."},button:{default:"Confirm"}},components:{JetButton:k,JetDialogModal:A,JetInput:M,JetInputError:B,JetSecondaryButton:y},data(){return{confirmingPassword:!1,form:{password:"",error:""}}},methods:{startConfirmingPassword(){axios.get(route("password.confirmation")).then(o=>{o.data.confirmed?this.$emit("confirmed"):(this.confirmingPassword=!0,setTimeout(()=>this.$refs.password.focus(),250))})},confirmPassword(){this.form.processing=!0,axios.post(route("password.confirm"),{password:this.form.password}).then(()=>{this.form.processing=!1,this.closeModal(),this.$nextTick(()=>this.$emit("confirmed"))}).catch(o=>{this.form.processing=!1,this.form.error=o.response.data.errors.password[0],this.$refs.password.focus()})},closeModal(){this.confirmingPassword=!1,this.form.password="",this.form.error=""}}}),E={class:"mt-4"};function q(o,c,C,j,F,$){const p=i("jet-input"),d=i("jet-input-error"),u=i("jet-secondary-button"),h=i("jet-button"),g=i("jet-dialog-modal");return t(),n("span",null,[a("span",{onClick:c[0]||(c[0]=(...l)=>o.startConfirmingPassword&&o.startConfirmingPassword(...l))},[P(o.$slots,"default")]),s(g,{show:o.confirmingPassword,onClose:o.closeModal},{title:e(()=>[r(f(o.title),1)]),content:e(()=>[r(f(o.content)+" ",1),a("div",E,[s(p,{type:"password",class:"mt-1 block w-3/4",placeholder:"Password",ref:"password",modelValue:o.form.password,"onUpdate:modelValue":c[1]||(c[1]=l=>o.form.password=l),onKeyup:z(o.confirmPassword,["enter"])},null,8,["modelValue","onKeyup"]),s(d,{message:o.form.error,class:"mt-2"},null,8,["message"])])]),footer:e(()=>[s(u,{onClick:o.closeModal},{default:e(()=>[r(" Cancel ")]),_:1},8,["onClick"]),s(h,{class:_(["ml-3",{"opacity-25":o.form.processing}]),onClick:o.confirmPassword,disabled:o.form.processing},{default:e(()=>[r(f(o.button),1)]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show","onClose"])])}const D=v(V,[["render",q]]),K=b({components:{JetActionSection:J,JetButton:k,JetConfirmsPassword:D,JetDangerButton:R,JetSecondaryButton:y},data(){return{enabling:!1,disabling:!1,qrCode:null,recoveryCodes:[]}},methods:{enableTwoFactorAuthentication(){this.enabling=!0,this.$inertia.post("/user/two-factor-authentication",{},{preserveScroll:!0,onSuccess:()=>Promise.all([this.showQrCode(),this.showRecoveryCodes()]),onFinish:()=>this.enabling=!1})},showQrCode(){return axios.get("/user/two-factor-qr-code").then(o=>{this.qrCode=o.data.svg})},showRecoveryCodes(){return axios.get("/user/two-factor-recovery-codes").then(o=>{this.recoveryCodes=o.data})},regenerateRecoveryCodes(){axios.post("/user/two-factor-recovery-codes").then(o=>{this.showRecoveryCodes()})},disableTwoFactorAuthentication(){this.disabling=!0,this.$inertia.delete("/user/two-factor-authentication",{preserveScroll:!0,onSuccess:()=>this.disabling=!1})}},computed:{twoFactorEnabled(){return!this.enabling&&this.$page.props.user.two_factor_enabled}}}),N={key:0,class:"text-lg font-medium text-gray-900"},I={key:1,class:"text-lg font-medium text-gray-900"},L=a("div",{class:"mt-3 max-w-xl text-sm text-gray-600"},[a("p",null," Kad 2FA autentifik\u0101cija ir akt\u012Bva, Jums ielogojoties sist\u0113m\u0101 pras\u012Bs ievad\u012Bt ciparu virkni, kas b\u016Bs redzama J\u016Bsu 2FA aplik\u0101cij\u0101 telefon\u0101. \u0160\u012B aplik\u0101cija var\u0113tu b\u016Bt, piem\u0113ram, Google Authenticator vai Microsoft Authenticator vai k\u0101da cita l\u012Bdz\u012Bga 2FA aplik\u0101cija. ")],-1),Q={key:2},H={key:0},G=a("div",{class:"mt-4 max-w-xl text-sm text-gray-600"},[a("p",{class:"font-semibold"}," 2FA ir akt\u012Bva. Sken\u0113 QR kodu, izmantojot telefona autentifik\u0101cijas aplik\u0101ciju. ")],-1),U=["innerHTML"],O={key:1},W=a("div",{class:"mt-4 max-w-xl text-sm text-gray-600"},[a("p",{class:"font-semibold"}," Saglab\u0101 \u0161os atjaunin\u0101\u0161anas kodus dro\u0161\u0101 viet\u0101. Tie var tikt izmantoti, lai piek\u013C\u016Btu kontam gad\u012Bjumam, ja tiek pazaud\u0113ta vai nestr\u0101d\u0101 2FA aplik\u0101cijas iek\u0101rta. ")],-1),X={class:"grid gap-1 max-w-xl mt-4 px-4 py-4 font-mono text-sm bg-gray-100 rounded-lg"},Y={class:"mt-5"},Z={key:0},x={key:1};function oo(o,c,C,j,F,$){const p=i("jet-button"),d=i("jet-confirms-password"),u=i("jet-secondary-button"),h=i("jet-danger-button"),g=i("jet-action-section");return t(),w(g,null,{title:e(()=>[r(" Divu faktoru autentifik\u0101cija ")]),description:e(()=>[r(" Tavs konts b\u016Bs dro\u0161\u0101ks, izmantojot 2FA. ")]),content:e(()=>[o.twoFactorEnabled?(t(),n("h3",N," Jums ir aktiviz\u0113ta 2FA. ")):(t(),n("h3",I," Jums nav aktiviz\u0113ta 2FA. ")),L,o.twoFactorEnabled?(t(),n("div",Q,[o.qrCode?(t(),n("div",H,[G,a("div",{class:"mt-4",innerHTML:o.qrCode},null,8,U)])):m("",!0),o.recoveryCodes.length>0?(t(),n("div",O,[W,a("div",X,[(t(!0),n(T,null,S(o.recoveryCodes,l=>(t(),n("div",{key:l},f(l),1))),128))])])):m("",!0)])):m("",!0),a("div",Y,[o.twoFactorEnabled?(t(),n("div",x,[s(d,{onConfirmed:o.regenerateRecoveryCodes},{default:e(()=>[o.recoveryCodes.length>0?(t(),w(u,{key:0,class:"mr-3"},{default:e(()=>[r(" Izveidot no jauna atjaunin\u0101\u0161anas kodus ")]),_:1})):m("",!0)]),_:1},8,["onConfirmed"]),s(d,{onConfirmed:o.showRecoveryCodes},{default:e(()=>[o.recoveryCodes.length===0?(t(),w(u,{key:0,class:"mr-3"},{default:e(()=>[r(" Par\u0101d\u012Bt atjaunin\u0101\u0161anas kodus ")]),_:1})):m("",!0)]),_:1},8,["onConfirmed"]),s(d,{onConfirmed:o.disableTwoFactorAuthentication},{default:e(()=>[s(h,{class:_({"opacity-25":o.disabling}),disabled:o.disabling},{default:e(()=>[r(" Atsp\u0113jot ")]),_:1},8,["class","disabled"])]),_:1},8,["onConfirmed"])])):(t(),n("div",Z,[s(d,{onConfirmed:o.enableTwoFactorAuthentication},{default:e(()=>[s(p,{type:"button",class:_({"opacity-25":o.enabling}),disabled:o.enabling},{default:e(()=>[r(" Aktiviz\u0113t ")]),_:1},8,["class","disabled"])]),_:1},8,["onConfirmed"])]))])]),_:1})}const lo=v(K,[["render",oo]]);export{lo as default};
